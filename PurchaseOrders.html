<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Purchase Orders</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            width: 100vw;
            overflow: scroll;
            /* Prevents scrollbars */
            box-sizing: border-box;
            /* Ensures padding and borders are included in the element’s dimensions */
            font-family: "Helvetica", sans-serif;
            font-weight: 700;
            font-style: normal;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            position: relative;
        }

        .table-container,
        .form-container {
            transition: transform 0.5s ease;
        }

        .form-container {
            position: absolute;
            left: 25%;
            top: 0;
            width: 50vw;
            height: auto;
            background: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            z-index: 10;
            transform: translateX(-110%);
            padding: 20px;
            box-sizing: border-box;
            display: none;
        }

        .form-container.active {
            transform: translateX(0);
        }

        .table-container {
            transition: transform 0.5s ease;
        }

        .table-container.slide-left {
            transform: translateX(-100%);
        }

        .form-container button.close {
            position: absolute;
            top: 10px;
            right: 10px;
        }

        .table thead th {
            background-color: #343a40;
            color: white;
        }

        .main-container {
            padding: 25px;
        }
    </style>
</head>

<body>

    <div class="square">
        <span>&lt;</span>
    </div>

    <div class="main-container">
        <!-- Sidebar -->
        <div id="sidebar-container">
        </div>
        <div class="container">
            <h1 class="mb-4">Purchase Orders</h1>

            <div class="mb-4">
                <button class="btn btn-success" id="createPurchaseOrderBtn">Create New Purchase Order</button>
                <a href="EditPurchaseOrder.html"="btn btn-success" id="createPurchaseOrder">Create</a>
            </div>

            <div class="form-container">
                <h2>Create New Purchase Order</h2>
                <form id="purchaseOrderForm">
                    <div id="content-container">
                        <!-- Content will be loaded here -->
                    </div>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            </div>


            <!-- Purchase Orders Table -->
            <table id="purchaseOrdersTable" class="table table-bordered table-hover table-responsive">
                <thead>
                    <tr>
                        <th>Customer</th>
                        <th>PO Number</th>
                        <th>Description</th>
                        <th>Title</th>
                        <th>Proposal</th>
                        <th>Sold by</th>
                        <th>Payment Terms</th>
                        <th>Total Amount</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Sample Data Rows -->
                    <tr>
                        <td>Customer A</td>
                        <td>PO001</td>
                        <td>Description for PO001</td>
                        <td>Title A</td>
                        <td>Proposal A</td>
                        <td>Salesperson A</td>
                        <td>30 days</td>
                        <td>₹5000</td>
                        <td class="text-nowrap">
                            <button class="btn btn-sm btn-primary mr-2">View</button>
                            <button class="btn btn-sm btn-secondary mr-2">Edit</button>
                            <button class="btn btn-sm btn-info">Attachment</button>
                        </td>

                    </tr>
                    <tr>
                        <td>Customer B</td>
                        <td>PO002</td>
                        <td>Description for PO002</td>
                        <td>Title B</td>
                        <td>Proposal B</td>
                        <td>Salesperson B</td>
                        <td>45 days</td>
                        <td>₹1000</td>
                        <td class="text-nowrap">
                            <button class="btn btn-sm btn-primary mr-2">View</button>
                            <button class="btn btn-sm btn-secondary mr-2">Edit</button>
                            <button class="btn btn-sm btn-info">Attachment</button>
                        </td>

                    </tr>
                    <tr>
                        <td>Customer C</td>
                        <td>PO003</td>
                        <td>Description for PO003</td>
                        <td>Title C</td>
                        <td>Proposal C</td>
                        <td>Salesperson C</td>
                        <td>60 days</td>
                        <td>₹50,000</td>
                        <td class="text-nowrap">
                            <button class="btn btn-sm btn-primary mr-2">View</button>
                            <button class="btn btn-sm btn-secondary mr-2">Edit</button>
                            <button class="btn btn-sm btn-info">Attachment</button>
                        </td>

                    </tr>
                    <tr>
                        <td>Customer D</td>
                        <td>PO004</td>
                        <td>Description for PO004</td>
                        <td>Title D</td>
                        <td>Proposal D</td>
                        <td>Salesperson D</td>
                        <td>30 days</td>
                        <td>₹852</td>
                        <td class="text-nowrap">
                            <button class="btn btn-sm btn-primary mr-2">View</button>
                            <button class="btn btn-sm btn-secondary mr-2">Edit</button>
                            <button class="btn btn-sm btn-info">Attachment</button>
                        </td>

                    </tr>
                    <tr>
                        <td>Customer E</td>
                        <td>PO005</td>
                        <td>Description for PO005</td>
                        <td>Title E</td>
                        <td>Proposal E</td>
                        <td>Salesperson E</td>
                        <td>45 days</td>
                        <td>₹75,000</td>
                        <td class="text-nowrap">
                            <button class="btn btn-sm btn-primary mr-2">View</button>
                            <button class="btn btn-sm btn-secondary mr-2">Edit</button>
                            <button class="btn btn-sm btn-info">Attachment</button>
                        </td>

                    </tr>
                </tbody>
            </table>

        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>

        <script src="https://code.jquery.com/jquery-3.7.1.js"
            integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>

        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const createPurchaseOrderBtn = document.getElementById("createPurchaseOrderBtn");
                const tableContainer = document.querySelector('.table');
                const formContainer = document.querySelector('.form-container');
                const contentContainer = document.getElementById("content-container");

                const sidebarContainer = document.getElementById("sidebar-container");
                fetch("./Sidebar.html")
                    .then(response => {
                        if (!response.ok) {
                            throw new Error("Network response was not ok");
                        }
                        return response.text();
                    })
                    .then(html => {
                        sidebarContainer.innerHTML = html;

                        // Extract and execute scripts
                        const scripts = sidebarContainer.querySelectorAll("script");
                        scripts.forEach(script => {
                            const newScript = document.createElement("script");
                            newScript.text = script.innerHTML;
                            document.body.appendChild(newScript);
                        });
                    })
                    .catch(error => {
                        console.error("There was a problem with the fetch operation:", error);
                    });

                createPurchaseOrderBtn.addEventListener("click", function () {
                    if (formContainer.style.display === "none" || formContainer.style.display === "") {
                        // Slide left the table and show the form
                        tableContainer.classList.add('slide-left');
                        formContainer.style.display = "block";
                        formContainer.classList.add('active');
                        createPurchaseOrderBtn.textContent = "Discard";
                    } else {
                        // Slide the form back and show the table
                        tableContainer.classList.remove('slide-left');
                        formContainer.style.display = "none";
                        formContainer.classList.remove('active');
                        createPurchaseOrderBtn.textContent = "Create New Purchase Order";
                    }
                });

                fetch("./EditPurchaseOrder.html")
                    .then(response => {
                        if (!response.ok) {
                            throw new Error("Network response was not ok");
                        }
                        return response.text();
                    })
                    .then(html => {
                        // Insert the content into the container
                        contentContainer.innerHTML = html;

                        // Extract and execute scripts
                        const scripts = contentContainer.querySelectorAll("script");
                        scripts.forEach(script => {
                            const newScript = document.createElement("script");
                            newScript.text = script.innerHTML;
                            document.body.appendChild(newScript); // Append to body to execute
                        });
                    })
                    .catch(error => {
                        console.error("There was a problem with the fetch operation:", error);
                    });
            });
        </script>


</body>

</html>